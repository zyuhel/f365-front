<script setup lang="ts">
defineProps<{
  item: object, show_detail: boolean, for_calendar: boolean
}>()
</script>

<template>

      <div class="uk-card" :height="item.resizedHeight+20" style="overflow: hidden">

        <div class="uk-card-media-top">
          <a class="lightbox-link"
             :href="`https://f365.zyuhel.ru${item.image_url}`" :data-type="(item.is_video)?'video':'image'"
             :style="`min-height:${item.resizedHeight-10}px;display:block; `" :data-caption="`<span>Ğ”ĞµĞ½ÑŒ ${item.day_number} - </span><span>${item.username}</span>, <a href='https://t.me/factory365/${item.message_id}' >ĞŸĞ¾ÑÑ‚ Ğ² ĞºĞ°Ğ½Ğ°Ğ»Ğµ</a>`"
          >
            <video v-if="item.is_video" :src="item.image_url"  controls="true"></video>
            <img v-else
              loading='lazy'
              :src="`https://f365.zyuhel.ru${item.image_url}`"
          ></a></div>
        <div class="uk-card-body uk-padding-remove-top uk-padding-remove-bottom">
          <div v-if="show_detail && item.place && item.place < 4" style="background-color: rgba(68, 68, 68,0.5);
    -webkit-box-shadow: 0 0 3px 2px rgba(0,0,0,.2);
    box-shadow: 0 0 3px 2px rgba(0,0,0,.2);
    height: 100px;
    left: -50px;
    position: absolute;
    top: -50px;
    width: 100px;
    color: #fff;
    line-height: 5;
    font-size: 2rem;
    -webkit-transform: rotate(-45deg); text-align: center;"><span v-if="item.place===1">ğŸ¥‡</span><span  v-if="item.place===2">ğŸ¥ˆ</span><span  v-if="item.place===3">ğŸ¥‰</span></div>
          <div v-if="show_detail && (item.day_number >2 && !(item.upvotes || item.downvotes ))" style="background-color: rgba(68, 68, 68,0.5);
    -webkit-box-shadow: 0 0 3px 2px rgba(0,0,0,.2);
    box-shadow: 0 0 3px 2px rgba(0,0,0,.2);
    right: 0;
    position: absolute;
    top: 0;
    color: rgb(255, 255, 255);
    font-size: 0.7rem;
    text-align: center;
    padding: 5px;" uk-tooltip="Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ / Ğ¸Ğ»Ğ¸ Ğ·Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ½Ğ¸ĞºÑ‚Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»">
            ğŸ•‘
          </div>
          <div v-if="show_detail && (item.upvotes || item.downvotes)" style="background-color: rgba(68, 68, 68,0.5);
    -webkit-box-shadow: 0 0 3px 2px rgba(0,0,0,.2);
    box-shadow: 0 0 3px 2px rgba(0,0,0,.2);
    right: 0;
    position: absolute;
    top: 0;
    color: rgb(255, 255, 255);
    font-size: 0.7rem;
    text-align: center;
    padding: 5px;"  :uk-tooltip="`${item.upvotes}ğŸ‘ / ${item.downvotes}ğŸ’©`">
            <span v-if="item.upvotes">{{item.upvotes}}ğŸ‘ </span><span v-if="item.upvotes && item.downvotes"> / </span><span v-if="item.downvotes">{{item.downvotes}}ğŸ’©</span>
          </div>
          <div v-if="for_calendar">
            <span v-if="item.username[0]!=='@'">{{ item.username }}</span><span v-else><a :href="`https://t.me/${item.username.substring(1)}`" target="_blank">{{item.username}}</a></span> <router-link :to="`/user/${item.username}`" class="uk-icon-link" uk-icon="album"></router-link>
          </div><div  v-else><router-link :to="`/day/${item.day_number}`">Ğ”ĞµĞ½ÑŒ {{ item.day_number }}</router-link> - <span v-if="item.username[0]!=='@'">{{ item.username }}</span><span v-else><a :href="`https://t.me/${item.username.substring(1)}`" target="_blank">{{item.username}}</a></span> <router-link :to="`/user/${item.username}`" class="uk-icon-link" uk-icon="album"></router-link>,
          <a :href="`https://t.me/factory365/${item.message_id}`" target="_blank">ĞŸĞ¾ÑÑ‚ Ğ² ĞºĞ°Ğ½Ğ°Ğ»Ğµ</a></div></div>
      </div>

</template>

